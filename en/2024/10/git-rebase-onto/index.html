<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Git rebase doesn't do what you think – La màquina de Turing</title>
    <meta property="og:title" content="Git rebase doesn't do what you think">
    <meta property="og:type" content="article">
    <meta property="og:url" content="https://lamaquinadeturing.su/en/2024/10/git-rebase-onto/">
    <meta property="og:image" content="https://lamaquinadeturing.su/assets/media/branches_opt1200.jpg">
    <link rel="stylesheet" href="/assets/css/linked.css" type="text/css">
<style>/* inlined.css */
html {
    font-size: 20px;
    --font-title: "Pixelar", -apple-system, BlinkMacSystemFont, sans-serif;
    --font-body: "Barlow", -apple-system, BlinkMacSystemFont, sans-serif;
    --font-size-18: .9rem;
    --color-text: hsl(0, 0%, 0%);
    --color-indifferent: hsl(0, 0%, 40%);
    --color-accent: hsl(120, 95%, 42%);
    --color-title: hsl(285, 4%, 21%);
    --color-border: hsl(285, 4%, 21%);
    --color-bg: hsl(0, 0%, 100%);
}

*,
*::before,
*::after {
    box-sizing: border-box;
}

body {
    margin: 0;
    font-size: var(--font-size-18);
    font-family: var(--font-body);
    line-height: 1.8;
    color: var(--color-text);
    overflow-x: hidden;
    font-weight: normal;
    background: url("/assets/img/dots.svg") var(--color-bg);
    background-size: 2px 2px;
    background-attachment: fixed;
}

h1, h2, h3, h4, h5, h6 {
    color: var(--color-title);
    margin: 1em 0 .5em 0;
    line-height: 1.4;
    font-weight: normal;
}

h1 { font-size: 2.4rem; }
h2 { font-size: 2rem; }
h3 { font-size: 1.7rem; }
h4 { font-size: 1.5rem; }
h5 { font-size: 1.3rem; }
h6 { font-size: 1.1rem; }

article h1 { font-size: 1.7rem; }
article h2 { font-size: 1.5rem; }
article h3 { font-size: 1.3rem; }
article h4 { font-size: 1.1rem; }
article h5 { font-size: 0.9rem; }
article h6 { font-size: 0.7rem; }
</style>
<script>
function loadStyleSheets(...sources) {
    for (const src of sources) {
        if (document.createStyleSheet) document.createStyleSheet(src);
        else {
            var stylesheet = document.createElement('link');
            stylesheet.href = src;
            stylesheet.rel = 'stylesheet';
            stylesheet.type = 'text/css';
            document.getElementsByTagName('head')[0].appendChild(stylesheet);
        }
    }
}
loadStyleSheets('/assets/css/deferred.css');
</script>
<script defer src="/assets/js/combined.js"></script>
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="dns-prefetch" href="https://fonts.googleapis.com/">
    <link rel="dns-prefetch" href="https://s.w.org/">
    <script>
        const page_lang = "en";
        const site_languages = ["ca","en","es"];
    </script>
    <script defer data-domain="lamaquinadeturing.su" src="https://plausible.factoria.lu/js/script.js"></script>
</head>

<body class="home blog eightbit-effect loading" itemscope="" itemtype="http://schema.org/WebPage">
    <div id="page">

        <header id="site-header" itemscope="" itemtype="http://schema.org/WPHeader">
    <div id="branding-wrapper" class="element__frame">
        <a href="https://lamaquinadeturing.su/en" rel="home" itemscope="" itemtype="http://schema.org/Brand">
            <h1 class="site-title" itemprop="name">La màquina de Turing</h1>
        </a>
    </div>

    <nav class="element__frame desktop-media">
        <!-- <p class="bar__title">Lang</p> -->

        <ul class="pull clear">
            <li class="menu-item"><span>en</span></li>
            
                
                    <li class="menu-item"><a href="https://lamaquinadeturing.su/ca">ca</a></li>
                
            
                
            
                
                    <li class="menu-item"><a href="https://lamaquinadeturing.su/es">es</a></li>
                
            
        </ul>
    </nav>

    <nav itemscope="" itemtype="http://schema.org/SiteNavigationElement" class="element__frame" id="mobile-window">
        <p class="bar__title mobile-media">Menu</p>

        <a id="nav-toggle" class="nav-slide-button" href="#"><span></span></a>

        <ul id="primary-menu" class="pull clear">
            <li class="menu-item mobile-media"><span>en</span></li>
            
                
                    <li class="menu-item mobile-media"><a href="https://lamaquinadeturing.su/ca">ca</a></li>
                
            
                
            
                
                    <li class="menu-item mobile-media"><a href="https://lamaquinadeturing.su/es">es</a></li>
                
            

            <li>
                <div class="search-form">
                    <label>
                        <span class="screen-reader-text">Search for:</span>
                        <input type="search" class="search-field" placeholder="Search…" name="q">
                    </label>
                    <input type="submit" class="search-submit" value="Search">
                </div>
            </li>

            
                
                
            
                
                
                <li class="menu-item desktop-media"><a href="/en/cybernetics/">Cybernetics</a></li>
                
                <li class="menu-item desktop-media"><a href="/en/lzhenauka/">Lzhenauka</a></li>
                
                <li class="menu-item desktop-media"><a href="/en/web/">Web</a></li>
                
            
                
                
            
        </ul>

        <ul class="search-results hidden"></ul>
    </nav>

    
    <ul class="social-media-profiles element__frame">
        <li>
            <p class="bar__title">
                Social </p>
        </li>
        
            
            
            
        <li><a href="https://mastodont.cat/@urixturing"><img src="/assets/img/mastodon.svg" width="12" height="12"></a></li>
        
        
        <li><a href="https://github.com/maquinadeturing/lamaquinadeturing.su"><img src="/assets/img/github.svg" width="12" height="12"></a></li>
        
    </ul>
    
</header>
<div class="clear"></div>

        
        <section class="grid__single" itemscope="" itemtype="http://schema.org/BlogPost">

            <div class="grid__item">
    <article itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting" id="post-5"
        class="element__frame post type-post status-publish format-standard has-post-thumbnail hentry">
        <header class="entry-header">
            <span class="posted-on">5 Oct 2024</span>
            
            <h2 class="entry__title" itemprop="headline">Git rebase doesn't do what you think</h2>
        </header>
        <div class="entry-content" itemprop="articleBody">
            
            
            <div class="entry-thumbnail-single landscape" itemprop="image">
                <img src="/assets/media/branches_opt.jpg" srcset="/assets/media/branches_opt698.jpg 698w, /assets/media/branches_opt1078.jpg 1078w" sizes="(max-width: 800px) 698px, (max-width: 1200px) 1078px, 698px" class="attachment-large size-large wp-post-image" alt="Miniature from a 12th-century Medical and Herbal Collection once owned by the monastery at Ourscamps just north of Paris, and now in the collection at the British Library (BL Sloane 1975).">
            </div>
            
            <div class="entry-thumbnail-caption"><p><a href="https://publicdomainreview.org/collection/miniatures-from-a-12th-century-medical-and-herbal-collection/">Miniature from a 12th-century Medical and Herbal Collection</a> once owned by the monastery at Ourscamps just north of Paris, and now in the collection at the British Library (BL Sloane 1975).</p>
</div>
            
            

            
            

            <p>As <a href="https://xkcd.com/1597/" class="link-external">xkcd says</a>, Git is an awesome tool, but if something goes wrong just delete everything and download a fresh copy.</p>

<p>One of these “oops” moments is <code class="language-plaintext highlighter-rouge">git rebase</code>. The cool brother of <code class="language-plaintext highlighter-rouge">git merge</code> is as powerful as misunderstood. I am writing this post because sometimes it surprises me that so many people will stumble upon common rebasing pitfalls.</p>

<p>What I want to explain in this post is the following:</p>

<div class="toc">
<p id="toc-1" class="toc toc-h2"><a href="#heading-1-what-people-think-rebasing-does">1. What people think rebasing does</a></p>
<p id="toc-2" class="toc toc-h2"><a href="#heading-2-what-rebasing-actually-does">2. What rebasing actually does</a></p>
<p id="toc-3" class="toc toc-h2"><a href="#heading-3-the-common-pitfall-when-rebasing">3. The common pitfall when rebasing</a></p>
<p id="toc-4" class="toc toc-h2"><a href="#heading-4-why-rebasing-onto-is-what-you-actually-wanted">4. Why rebasing onto is what you actually wanted</a></p>
</div>

<h2 id="heading-1-what-people-think-rebasing-does" class="heading">
<a class="heading-link" href="#heading-1-what-people-think-rebasing-does">§</a>1. What people think rebasing does <a href="#toc-1" class="toc-back-link">↩</a>
</h2>

<p>Git is like a tree, with a common trunk like <code class="language-plaintext highlighter-rouge">main</code> and branches like <code class="language-plaintext highlighter-rouge">develop</code>:</p>

<div class="mermaid">
<!--
%%{init: { 'theme': 'base' } }%%
gitGraph
    commit id: "1"
    commit id: "2"
    branch develop
    checkout develop
    commit id: "5"
    commit id: "6"
    checkout main
    commit id: "3"
    commit id: "4"
-->
<svg aria-roledescription="gitGraph" role="graphics-document document" viewbox="-117.1484375 -18 425.1484375 144.65701293945312" style="max-width: 425.148px; background-color: white;" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="100%" id="svg2dd5850ac7fd55a253dce88527b14c9b"><style>#svg2dd5850ac7fd55a253dce88527b14c9b{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#333;}#svg2dd5850ac7fd55a253dce88527b14c9b .error-icon{fill:hsl(220.5882352941, 100%, 98.3333333333%);}#svg2dd5850ac7fd55a253dce88527b14c9b .error-text{fill:rgb(8.5000000002, 5.7500000001, 0);stroke:rgb(8.5000000002, 5.7500000001, 0);}#svg2dd5850ac7fd55a253dce88527b14c9b .edge-thickness-normal{stroke-width:1px;}#svg2dd5850ac7fd55a253dce88527b14c9b .edge-thickness-thick{stroke-width:3.5px;}#svg2dd5850ac7fd55a253dce88527b14c9b .edge-pattern-solid{stroke-dasharray:0;}#svg2dd5850ac7fd55a253dce88527b14c9b .edge-thickness-invisible{stroke-width:0;fill:none;}#svg2dd5850ac7fd55a253dce88527b14c9b .edge-pattern-dashed{stroke-dasharray:3;}#svg2dd5850ac7fd55a253dce88527b14c9b .edge-pattern-dotted{stroke-dasharray:2;}#svg2dd5850ac7fd55a253dce88527b14c9b .marker{fill:#0b0b0b;stroke:#0b0b0b;}#svg2dd5850ac7fd55a253dce88527b14c9b .marker.cross{stroke:#0b0b0b;}#svg2dd5850ac7fd55a253dce88527b14c9b svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#svg2dd5850ac7fd55a253dce88527b14c9b p{margin:0;}#svg2dd5850ac7fd55a253dce88527b14c9b .commit-id,#svg2dd5850ac7fd55a253dce88527b14c9b .commit-msg,#svg2dd5850ac7fd55a253dce88527b14c9b .branch-label{fill:lightgrey;color:lightgrey;font-family:'trebuchet ms',verdana,arial,sans-serif;font-family:var(--mermaid-font-family);}#svg2dd5850ac7fd55a253dce88527b14c9b .branch-label0{fill:#333;}#svg2dd5850ac7fd55a253dce88527b14c9b .commit0{stroke:hsl(40.5882352941, 100%, 68.3333333333%);fill:hsl(40.5882352941, 100%, 68.3333333333%);}#svg2dd5850ac7fd55a253dce88527b14c9b .commit-highlight0{stroke:rgb(0, 52.2500000001, 161.5000000002);fill:rgb(0, 52.2500000001, 161.5000000002);}#svg2dd5850ac7fd55a253dce88527b14c9b .label0{fill:hsl(40.5882352941, 100%, 68.3333333333%);}#svg2dd5850ac7fd55a253dce88527b14c9b .arrow0{stroke:hsl(40.5882352941, 100%, 68.3333333333%);}#svg2dd5850ac7fd55a253dce88527b14c9b .branch-label1{fill:#333;}#svg2dd5850ac7fd55a253dce88527b14c9b .commit1{stroke:hsl(-79.4117647059, 100%, 68.3333333333%);fill:hsl(-79.4117647059, 100%, 68.3333333333%);}#svg2dd5850ac7fd55a253dce88527b14c9b .commit-highlight1{stroke:rgb(52.2500000001, 161.5000000002, 0);fill:rgb(52.2500000001, 161.5000000002, 0);}#svg2dd5850ac7fd55a253dce88527b14c9b .label1{fill:hsl(-79.4117647059, 100%, 68.3333333333%);}#svg2dd5850ac7fd55a253dce88527b14c9b .arrow1{stroke:hsl(-79.4117647059, 100%, 68.3333333333%);}#svg2dd5850ac7fd55a253dce88527b14c9b .branch-label2{fill:#333;}#svg2dd5850ac7fd55a253dce88527b14c9b .commit2{stroke:hsl(220.5882352941, 100%, 73.3333333333%);fill:hsl(220.5882352941, 100%, 73.3333333333%);}#svg2dd5850ac7fd55a253dce88527b14c9b .commit-highlight2{stroke:rgb(136.0000000002, 92.0000000001, 0);fill:rgb(136.0000000002, 92.0000000001, 0);}#svg2dd5850ac7fd55a253dce88527b14c9b .label2{fill:hsl(220.5882352941, 100%, 73.3333333333%);}#svg2dd5850ac7fd55a253dce88527b14c9b .arrow2{stroke:hsl(220.5882352941, 100%, 73.3333333333%);}#svg2dd5850ac7fd55a253dce88527b14c9b .branch-label3{fill:#333;}#svg2dd5850ac7fd55a253dce88527b14c9b .commit3{stroke:hsl(10.5882352941, 100%, 68.3333333333%);fill:hsl(10.5882352941, 100%, 68.3333333333%);}#svg2dd5850ac7fd55a253dce88527b14c9b .commit-highlight3{stroke:rgb(0, 133.0000000002, 161.5000000002);fill:rgb(0, 133.0000000002, 161.5000000002);}#svg2dd5850ac7fd55a253dce88527b14c9b .label3{fill:hsl(10.5882352941, 100%, 68.3333333333%);}#svg2dd5850ac7fd55a253dce88527b14c9b .arrow3{stroke:hsl(10.5882352941, 100%, 68.3333333333%);}#svg2dd5850ac7fd55a253dce88527b14c9b .branch-label4{fill:#333;}#svg2dd5850ac7fd55a253dce88527b14c9b .commit4{stroke:hsl(-19.4117647059, 100%, 68.3333333333%);fill:hsl(-19.4117647059, 100%, 68.3333333333%);}#svg2dd5850ac7fd55a253dce88527b14c9b .commit-highlight4{stroke:rgb(0, 161.5000000002, 109.2500000001);fill:rgb(0, 161.5000000002, 109.2500000001);}#svg2dd5850ac7fd55a253dce88527b14c9b .label4{fill:hsl(-19.4117647059, 100%, 68.3333333333%);}#svg2dd5850ac7fd55a253dce88527b14c9b .arrow4{stroke:hsl(-19.4117647059, 100%, 68.3333333333%);}#svg2dd5850ac7fd55a253dce88527b14c9b .branch-label5{fill:#333;}#svg2dd5850ac7fd55a253dce88527b14c9b .commit5{stroke:hsl(-49.4117647059, 100%, 68.3333333333%);fill:hsl(-49.4117647059, 100%, 68.3333333333%);}#svg2dd5850ac7fd55a253dce88527b14c9b .commit-highlight5{stroke:rgb(0, 161.5000000002, 28.5);fill:rgb(0, 161.5000000002, 28.5);}#svg2dd5850ac7fd55a253dce88527b14c9b .label5{fill:hsl(-49.4117647059, 100%, 68.3333333333%);}#svg2dd5850ac7fd55a253dce88527b14c9b .arrow5{stroke:hsl(-49.4117647059, 100%, 68.3333333333%);}#svg2dd5850ac7fd55a253dce88527b14c9b .branch-label6{fill:#333;}#svg2dd5850ac7fd55a253dce88527b14c9b .commit6{stroke:hsl(100.5882352941, 100%, 68.3333333333%);fill:hsl(100.5882352941, 100%, 68.3333333333%);}#svg2dd5850ac7fd55a253dce88527b14c9b .commit-highlight6{stroke:rgb(109.2500000001, 0, 161.5000000002);fill:rgb(109.2500000001, 0, 161.5000000002);}#svg2dd5850ac7fd55a253dce88527b14c9b .label6{fill:hsl(100.5882352941, 100%, 68.3333333333%);}#svg2dd5850ac7fd55a253dce88527b14c9b .arrow6{stroke:hsl(100.5882352941, 100%, 68.3333333333%);}#svg2dd5850ac7fd55a253dce88527b14c9b .branch-label7{fill:#333;}#svg2dd5850ac7fd55a253dce88527b14c9b .commit7{stroke:hsl(160.5882352941, 100%, 68.3333333333%);fill:hsl(160.5882352941, 100%, 68.3333333333%);}#svg2dd5850ac7fd55a253dce88527b14c9b .commit-highlight7{stroke:rgb(161.5000000002, 0, 52.2500000001);fill:rgb(161.5000000002, 0, 52.2500000001);}#svg2dd5850ac7fd55a253dce88527b14c9b .label7{fill:hsl(160.5882352941, 100%, 68.3333333333%);}#svg2dd5850ac7fd55a253dce88527b14c9b .arrow7{stroke:hsl(160.5882352941, 100%, 68.3333333333%);}#svg2dd5850ac7fd55a253dce88527b14c9b .branch{stroke-width:1;stroke:#0b0b0b;stroke-dasharray:2;}#svg2dd5850ac7fd55a253dce88527b14c9b .commit-label{font-size:10px;fill:rgb(11.0000000001, 34.0000000002, 0);}#svg2dd5850ac7fd55a253dce88527b14c9b .commit-label-bkg{font-size:10px;fill:hsl(-79.4117647059, 100%, 93.3333333333%);opacity:0.5;}#svg2dd5850ac7fd55a253dce88527b14c9b .tag-label{font-size:10px;fill:#333;}#svg2dd5850ac7fd55a253dce88527b14c9b .tag-label-bkg{fill:#fff4dd;stroke:hsl(40.5882352941, 60%, 83.3333333333%);}#svg2dd5850ac7fd55a253dce88527b14c9b .tag-hole{fill:#333;}#svg2dd5850ac7fd55a253dce88527b14c9b .commit-merge{stroke:#fff4dd;fill:#fff4dd;}#svg2dd5850ac7fd55a253dce88527b14c9b .commit-reverse{stroke:#fff4dd;fill:#fff4dd;stroke-width:3;}#svg2dd5850ac7fd55a253dce88527b14c9b .commit-highlight-inner{stroke:#fff4dd;fill:#fff4dd;}#svg2dd5850ac7fd55a253dce88527b14c9b .arrow{stroke-width:8;stroke-linecap:round;fill:none;}#svg2dd5850ac7fd55a253dce88527b14c9b .gitTitleText{text-anchor:middle;font-size:18px;fill:#333;}#svg2dd5850ac7fd55a253dce88527b14c9b :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}</style>
<g></g><g class="commit-bullets"></g><g class="commit-labels"></g><g><line class="branch branch0" y2="0" x2="300" y1="0" x1="0"></line><rect transform="translate(-19, -8.5)" height="21" width="52.6875" y="-0.5" x="-68.6875" ry="4" rx="4" class="branchLabelBkg label0"></rect><g class="branchLabel"><g transform="translate(-78.6875, -9.5)" class="label branch-label0"><text><tspan class="row" x="0" dy="1em" xml:space="preserve">main</tspan></text></g></g><line class="branch branch1" y2="90" x2="300" y1="90" x1="0"></line><rect transform="translate(-19, 81.5)" height="21" width="74.1484375" y="-0.5" x="-90.1484375" ry="4" rx="4" class="branchLabelBkg label1"></rect><g class="branchLabel"><g transform="translate(-100.1484375, 80.5)" class="label branch-label1"><text><tspan class="row" x="0" dy="1em" xml:space="preserve">develop</tspan></text></g></g></g><g class="commit-arrows"><path class="arrow arrow0" d="M 10 0 L 60 0"></path><path class="arrow arrow1" d="M 60 0 L 60 70 A 20 20, 0, 0, 0, 80 90 L 110 90"></path><path class="arrow arrow1" d="M 110 90 L 160 90"></path><path class="arrow arrow0" d="M 60 0 L 210 0"></path><path class="arrow arrow0" d="M 210 0 L 260 0"></path></g><g class="commit-bullets"><circle class="commit 1 commit0" r="10" cy="0" cx="10"></circle><circle class="commit 2 commit0" r="10" cy="0" cx="60"></circle><circle class="commit 5 commit1" r="10" cy="90" cx="110"></circle><circle class="commit 6 commit1" r="10" cy="90" cx="160"></circle><circle class="commit 3 commit0" r="10" cy="0" cx="210"></circle><circle class="commit 4 commit0" r="10" cy="0" cx="260"></circle></g><g class="commit-labels"><g transform="translate(-13.58, 12.04) rotate(-45, 0, 0)"><rect height="15" width="10" y="13.5" x="5" class="commit-label-bkg"></rect><text class="commit-label" y="25" x="7">1</text></g><g transform="translate(-13.58, 12.04) rotate(-45, 50, 0)"><rect height="15" width="10" y="13.5" x="55" class="commit-label-bkg"></rect><text class="commit-label" y="25" x="57">2</text></g><g transform="translate(-13.58, 12.04) rotate(-45, 100, 90)"><rect height="15" width="10" y="103.5" x="105" class="commit-label-bkg"></rect><text class="commit-label" y="115" x="107">5</text></g><g transform="translate(-13.58, 12.04) rotate(-45, 150, 90)"><rect height="15" width="10" y="103.5" x="155" class="commit-label-bkg"></rect><text class="commit-label" y="115" x="157">6</text></g><g transform="translate(-13.58, 12.04) rotate(-45, 200, 0)"><rect height="15" width="10" y="13.5" x="205" class="commit-label-bkg"></rect><text class="commit-label" y="25" x="207">3</text></g><g transform="translate(-13.58, 12.04) rotate(-45, 250, 0)"><rect height="15" width="10" y="13.5" x="255" class="commit-label-bkg"></rect><text class="commit-label" y="25" x="257">4</text></g></g></svg>
</div>

<p>If we execute:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git switch develop
git rebase main
</code></pre></div></div>

<p>Then commits 5 and 6 will be moved (if there are no conflicts) to the tip of <code class="language-plaintext highlighter-rouge">main</code> like this:</p>

<div class="mermaid">
<!--
%%{init: { 'theme': 'base' } }%%
gitGraph
    commit id: "1"
    commit id: "2"
    commit id: "3"
    commit id: "4"
    branch develop
    checkout develop
    commit id: "5"
    commit id: "6"
-->
<svg aria-roledescription="gitGraph" role="graphics-document document" viewbox="-117.1484375 -18 425.1484375 144.65701293945312" style="max-width: 425.148px; background-color: white;" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="100%" id="svg3fe5217ed2a7e121a2652c9d30fbe4cc"><style>#svg3fe5217ed2a7e121a2652c9d30fbe4cc{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#333;}#svg3fe5217ed2a7e121a2652c9d30fbe4cc .error-icon{fill:hsl(220.5882352941, 100%, 98.3333333333%);}#svg3fe5217ed2a7e121a2652c9d30fbe4cc .error-text{fill:rgb(8.5000000002, 5.7500000001, 0);stroke:rgb(8.5000000002, 5.7500000001, 0);}#svg3fe5217ed2a7e121a2652c9d30fbe4cc .edge-thickness-normal{stroke-width:1px;}#svg3fe5217ed2a7e121a2652c9d30fbe4cc .edge-thickness-thick{stroke-width:3.5px;}#svg3fe5217ed2a7e121a2652c9d30fbe4cc .edge-pattern-solid{stroke-dasharray:0;}#svg3fe5217ed2a7e121a2652c9d30fbe4cc .edge-thickness-invisible{stroke-width:0;fill:none;}#svg3fe5217ed2a7e121a2652c9d30fbe4cc .edge-pattern-dashed{stroke-dasharray:3;}#svg3fe5217ed2a7e121a2652c9d30fbe4cc .edge-pattern-dotted{stroke-dasharray:2;}#svg3fe5217ed2a7e121a2652c9d30fbe4cc .marker{fill:#0b0b0b;stroke:#0b0b0b;}#svg3fe5217ed2a7e121a2652c9d30fbe4cc .marker.cross{stroke:#0b0b0b;}#svg3fe5217ed2a7e121a2652c9d30fbe4cc svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#svg3fe5217ed2a7e121a2652c9d30fbe4cc p{margin:0;}#svg3fe5217ed2a7e121a2652c9d30fbe4cc .commit-id,#svg3fe5217ed2a7e121a2652c9d30fbe4cc .commit-msg,#svg3fe5217ed2a7e121a2652c9d30fbe4cc .branch-label{fill:lightgrey;color:lightgrey;font-family:'trebuchet ms',verdana,arial,sans-serif;font-family:var(--mermaid-font-family);}#svg3fe5217ed2a7e121a2652c9d30fbe4cc .branch-label0{fill:#333;}#svg3fe5217ed2a7e121a2652c9d30fbe4cc .commit0{stroke:hsl(40.5882352941, 100%, 68.3333333333%);fill:hsl(40.5882352941, 100%, 68.3333333333%);}#svg3fe5217ed2a7e121a2652c9d30fbe4cc .commit-highlight0{stroke:rgb(0, 52.2500000001, 161.5000000002);fill:rgb(0, 52.2500000001, 161.5000000002);}#svg3fe5217ed2a7e121a2652c9d30fbe4cc .label0{fill:hsl(40.5882352941, 100%, 68.3333333333%);}#svg3fe5217ed2a7e121a2652c9d30fbe4cc .arrow0{stroke:hsl(40.5882352941, 100%, 68.3333333333%);}#svg3fe5217ed2a7e121a2652c9d30fbe4cc .branch-label1{fill:#333;}#svg3fe5217ed2a7e121a2652c9d30fbe4cc .commit1{stroke:hsl(-79.4117647059, 100%, 68.3333333333%);fill:hsl(-79.4117647059, 100%, 68.3333333333%);}#svg3fe5217ed2a7e121a2652c9d30fbe4cc .commit-highlight1{stroke:rgb(52.2500000001, 161.5000000002, 0);fill:rgb(52.2500000001, 161.5000000002, 0);}#svg3fe5217ed2a7e121a2652c9d30fbe4cc .label1{fill:hsl(-79.4117647059, 100%, 68.3333333333%);}#svg3fe5217ed2a7e121a2652c9d30fbe4cc .arrow1{stroke:hsl(-79.4117647059, 100%, 68.3333333333%);}#svg3fe5217ed2a7e121a2652c9d30fbe4cc .branch-label2{fill:#333;}#svg3fe5217ed2a7e121a2652c9d30fbe4cc .commit2{stroke:hsl(220.5882352941, 100%, 73.3333333333%);fill:hsl(220.5882352941, 100%, 73.3333333333%);}#svg3fe5217ed2a7e121a2652c9d30fbe4cc .commit-highlight2{stroke:rgb(136.0000000002, 92.0000000001, 0);fill:rgb(136.0000000002, 92.0000000001, 0);}#svg3fe5217ed2a7e121a2652c9d30fbe4cc .label2{fill:hsl(220.5882352941, 100%, 73.3333333333%);}#svg3fe5217ed2a7e121a2652c9d30fbe4cc .arrow2{stroke:hsl(220.5882352941, 100%, 73.3333333333%);}#svg3fe5217ed2a7e121a2652c9d30fbe4cc .branch-label3{fill:#333;}#svg3fe5217ed2a7e121a2652c9d30fbe4cc .commit3{stroke:hsl(10.5882352941, 100%, 68.3333333333%);fill:hsl(10.5882352941, 100%, 68.3333333333%);}#svg3fe5217ed2a7e121a2652c9d30fbe4cc .commit-highlight3{stroke:rgb(0, 133.0000000002, 161.5000000002);fill:rgb(0, 133.0000000002, 161.5000000002);}#svg3fe5217ed2a7e121a2652c9d30fbe4cc .label3{fill:hsl(10.5882352941, 100%, 68.3333333333%);}#svg3fe5217ed2a7e121a2652c9d30fbe4cc .arrow3{stroke:hsl(10.5882352941, 100%, 68.3333333333%);}#svg3fe5217ed2a7e121a2652c9d30fbe4cc .branch-label4{fill:#333;}#svg3fe5217ed2a7e121a2652c9d30fbe4cc .commit4{stroke:hsl(-19.4117647059, 100%, 68.3333333333%);fill:hsl(-19.4117647059, 100%, 68.3333333333%);}#svg3fe5217ed2a7e121a2652c9d30fbe4cc .commit-highlight4{stroke:rgb(0, 161.5000000002, 109.2500000001);fill:rgb(0, 161.5000000002, 109.2500000001);}#svg3fe5217ed2a7e121a2652c9d30fbe4cc .label4{fill:hsl(-19.4117647059, 100%, 68.3333333333%);}#svg3fe5217ed2a7e121a2652c9d30fbe4cc .arrow4{stroke:hsl(-19.4117647059, 100%, 68.3333333333%);}#svg3fe5217ed2a7e121a2652c9d30fbe4cc .branch-label5{fill:#333;}#svg3fe5217ed2a7e121a2652c9d30fbe4cc .commit5{stroke:hsl(-49.4117647059, 100%, 68.3333333333%);fill:hsl(-49.4117647059, 100%, 68.3333333333%);}#svg3fe5217ed2a7e121a2652c9d30fbe4cc .commit-highlight5{stroke:rgb(0, 161.5000000002, 28.5);fill:rgb(0, 161.5000000002, 28.5);}#svg3fe5217ed2a7e121a2652c9d30fbe4cc .label5{fill:hsl(-49.4117647059, 100%, 68.3333333333%);}#svg3fe5217ed2a7e121a2652c9d30fbe4cc .arrow5{stroke:hsl(-49.4117647059, 100%, 68.3333333333%);}#svg3fe5217ed2a7e121a2652c9d30fbe4cc .branch-label6{fill:#333;}#svg3fe5217ed2a7e121a2652c9d30fbe4cc .commit6{stroke:hsl(100.5882352941, 100%, 68.3333333333%);fill:hsl(100.5882352941, 100%, 68.3333333333%);}#svg3fe5217ed2a7e121a2652c9d30fbe4cc .commit-highlight6{stroke:rgb(109.2500000001, 0, 161.5000000002);fill:rgb(109.2500000001, 0, 161.5000000002);}#svg3fe5217ed2a7e121a2652c9d30fbe4cc .label6{fill:hsl(100.5882352941, 100%, 68.3333333333%);}#svg3fe5217ed2a7e121a2652c9d30fbe4cc .arrow6{stroke:hsl(100.5882352941, 100%, 68.3333333333%);}#svg3fe5217ed2a7e121a2652c9d30fbe4cc .branch-label7{fill:#333;}#svg3fe5217ed2a7e121a2652c9d30fbe4cc .commit7{stroke:hsl(160.5882352941, 100%, 68.3333333333%);fill:hsl(160.5882352941, 100%, 68.3333333333%);}#svg3fe5217ed2a7e121a2652c9d30fbe4cc .commit-highlight7{stroke:rgb(161.5000000002, 0, 52.2500000001);fill:rgb(161.5000000002, 0, 52.2500000001);}#svg3fe5217ed2a7e121a2652c9d30fbe4cc .label7{fill:hsl(160.5882352941, 100%, 68.3333333333%);}#svg3fe5217ed2a7e121a2652c9d30fbe4cc .arrow7{stroke:hsl(160.5882352941, 100%, 68.3333333333%);}#svg3fe5217ed2a7e121a2652c9d30fbe4cc .branch{stroke-width:1;stroke:#0b0b0b;stroke-dasharray:2;}#svg3fe5217ed2a7e121a2652c9d30fbe4cc .commit-label{font-size:10px;fill:rgb(11.0000000001, 34.0000000002, 0);}#svg3fe5217ed2a7e121a2652c9d30fbe4cc .commit-label-bkg{font-size:10px;fill:hsl(-79.4117647059, 100%, 93.3333333333%);opacity:0.5;}#svg3fe5217ed2a7e121a2652c9d30fbe4cc .tag-label{font-size:10px;fill:#333;}#svg3fe5217ed2a7e121a2652c9d30fbe4cc .tag-label-bkg{fill:#fff4dd;stroke:hsl(40.5882352941, 60%, 83.3333333333%);}#svg3fe5217ed2a7e121a2652c9d30fbe4cc .tag-hole{fill:#333;}#svg3fe5217ed2a7e121a2652c9d30fbe4cc .commit-merge{stroke:#fff4dd;fill:#fff4dd;}#svg3fe5217ed2a7e121a2652c9d30fbe4cc .commit-reverse{stroke:#fff4dd;fill:#fff4dd;stroke-width:3;}#svg3fe5217ed2a7e121a2652c9d30fbe4cc .commit-highlight-inner{stroke:#fff4dd;fill:#fff4dd;}#svg3fe5217ed2a7e121a2652c9d30fbe4cc .arrow{stroke-width:8;stroke-linecap:round;fill:none;}#svg3fe5217ed2a7e121a2652c9d30fbe4cc .gitTitleText{text-anchor:middle;font-size:18px;fill:#333;}#svg3fe5217ed2a7e121a2652c9d30fbe4cc :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}</style>
<g></g><g class="commit-bullets"></g><g class="commit-labels"></g><g><line class="branch branch0" y2="0" x2="300" y1="0" x1="0"></line><rect transform="translate(-19, -8.5)" height="21" width="52.6875" y="-0.5" x="-68.6875" ry="4" rx="4" class="branchLabelBkg label0"></rect><g class="branchLabel"><g transform="translate(-78.6875, -9.5)" class="label branch-label0"><text><tspan class="row" x="0" dy="1em" xml:space="preserve">main</tspan></text></g></g><line class="branch branch1" y2="90" x2="300" y1="90" x1="0"></line><rect transform="translate(-19, 81.5)" height="21" width="74.1484375" y="-0.5" x="-90.1484375" ry="4" rx="4" class="branchLabelBkg label1"></rect><g class="branchLabel"><g transform="translate(-100.1484375, 80.5)" class="label branch-label1"><text><tspan class="row" x="0" dy="1em" xml:space="preserve">develop</tspan></text></g></g></g><g class="commit-arrows"><path class="arrow arrow0" d="M 10 0 L 60 0"></path><path class="arrow arrow0" d="M 60 0 L 110 0"></path><path class="arrow arrow0" d="M 110 0 L 160 0"></path><path class="arrow arrow1" d="M 160 0 L 160 70 A 20 20, 0, 0, 0, 180 90 L 210 90"></path><path class="arrow arrow1" d="M 210 90 L 260 90"></path></g><g class="commit-bullets"><circle class="commit 1 commit0" r="10" cy="0" cx="10"></circle><circle class="commit 2 commit0" r="10" cy="0" cx="60"></circle><circle class="commit 3 commit0" r="10" cy="0" cx="110"></circle><circle class="commit 4 commit0" r="10" cy="0" cx="160"></circle><circle class="commit 5 commit1" r="10" cy="90" cx="210"></circle><circle class="commit 6 commit1" r="10" cy="90" cx="260"></circle></g><g class="commit-labels"><g transform="translate(-13.58, 12.04) rotate(-45, 0, 0)"><rect height="15" width="10" y="13.5" x="5" class="commit-label-bkg"></rect><text class="commit-label" y="25" x="7">1</text></g><g transform="translate(-13.58, 12.04) rotate(-45, 50, 0)"><rect height="15" width="10" y="13.5" x="55" class="commit-label-bkg"></rect><text class="commit-label" y="25" x="57">2</text></g><g transform="translate(-13.58, 12.04) rotate(-45, 100, 0)"><rect height="15" width="10" y="13.5" x="105" class="commit-label-bkg"></rect><text class="commit-label" y="25" x="107">3</text></g><g transform="translate(-13.58, 12.04) rotate(-45, 150, 0)"><rect height="15" width="10" y="13.5" x="155" class="commit-label-bkg"></rect><text class="commit-label" y="25" x="157">4</text></g><g transform="translate(-13.58, 12.04) rotate(-45, 200, 90)"><rect height="15" width="10" y="103.5" x="205" class="commit-label-bkg"></rect><text class="commit-label" y="115" x="207">5</text></g><g transform="translate(-13.58, 12.04) rotate(-45, 250, 90)"><rect height="15" width="10" y="103.5" x="255" class="commit-label-bkg"></rect><text class="commit-label" y="115" x="257">6</text></g></g></svg>
</div>

<p>It appears as if we took commits 5 and 6 and dragged and dropped them on top of commit 4. Simple, right? Well, not exactly.</p>

<h2 id="heading-2-what-rebasing-actually-does" class="heading">
<a class="heading-link" href="#heading-2-what-rebasing-actually-does">§</a>2. What rebasing actually does <a href="#toc-2" class="toc-back-link">↩</a>
</h2>

<p>The impression users get from rebasing is that commits are “moved”. We wanted branch <code class="language-plaintext highlighter-rouge">develop</code> to be at the tip of <code class="language-plaintext highlighter-rouge">main</code>. But how does Git know which commits to move?</p>

<p>Intuitively, we know that we wanted commits 5 and 6 to be moved from commit 2 to commit 4. So let’s give these two commits a name:</p>

<ul>
  <li>Commit 2 is the <em>common ancestor</em>.</li>
  <li>Commit 4 is the <em>merge base</em>.</li>
</ul>

<p>When doing a rebase, Git first calculates the common ancestor of the source branch and the target branch (commit 2). Then it selects all the commits from the common ancestor to the tip of the source branch and applies them to the merge base.</p>

<p>In other words, the previous commands are equivalent to:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git branch <span class="nt">-d</span> develop
git switch main
git checkout <span class="nt">-b</span> develop
git cherry-pick 5
git cherry-pick 6
</code></pre></div></div>

<p>It is important here to understand these two ideas about rebasing:</p>
<ol>
  <li>Commits are not moved, but re-applied.</li>
  <li>Rebasing is done from a common ancestor to a merge base.</li>
</ol>

<p>The first point is the cause of a common pitfall that makes people fear rebasing. The second is the key to avoiding it.</p>

<h2 id="heading-3-the-common-pitfall-when-rebasing" class="heading">
<a class="heading-link" href="#heading-3-the-common-pitfall-when-rebasing">§</a>3. The common pitfall when rebasing <a href="#toc-3" class="toc-back-link">↩</a>
</h2>

<p>In collaborative teams, the following situation is very common: a feature branch <code class="language-plaintext highlighter-rouge">bar</code> depends on a previous feature <code class="language-plaintext highlighter-rouge">foo</code>. Meanwhile, <code class="language-plaintext highlighter-rouge">main</code> has continued to grow (commits 7 and 8). When feature <code class="language-plaintext highlighter-rouge">foo</code> is finally rebased on top of <code class="language-plaintext highlighter-rouge">main</code>, there is a conflict between its commits and the new commits in <code class="language-plaintext highlighter-rouge">main</code>:</p>

<div class="mermaid">
<!--
%%{init: { 'theme': 'base' } }%%
gitGraph
    commit id: "1"
    commit id: "2"
    branch feature/foo
    checkout feature/foo
    commit id: "3" type: REVERSE
    commit id: "4" type: REVERSE
    branch feature/bar
    checkout feature/bar
    commit id: "5"
    commit id: "6"
    checkout main
    commit id: "7" type: HIGHLIGHT
    commit id: "8" type: HIGHLIGHT
-->
<svg aria-roledescription="gitGraph" role="graphics-document document" viewbox="-139.0546875 -18 547.0546875 234.65699768066406" style="max-width: 547.055px; background-color: white;" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="100%" id="svgdd015e60723b4a15b9446595a9e74c57"><style>#svgdd015e60723b4a15b9446595a9e74c57{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#333;}#svgdd015e60723b4a15b9446595a9e74c57 .error-icon{fill:hsl(220.5882352941, 100%, 98.3333333333%);}#svgdd015e60723b4a15b9446595a9e74c57 .error-text{fill:rgb(8.5000000002, 5.7500000001, 0);stroke:rgb(8.5000000002, 5.7500000001, 0);}#svgdd015e60723b4a15b9446595a9e74c57 .edge-thickness-normal{stroke-width:1px;}#svgdd015e60723b4a15b9446595a9e74c57 .edge-thickness-thick{stroke-width:3.5px;}#svgdd015e60723b4a15b9446595a9e74c57 .edge-pattern-solid{stroke-dasharray:0;}#svgdd015e60723b4a15b9446595a9e74c57 .edge-thickness-invisible{stroke-width:0;fill:none;}#svgdd015e60723b4a15b9446595a9e74c57 .edge-pattern-dashed{stroke-dasharray:3;}#svgdd015e60723b4a15b9446595a9e74c57 .edge-pattern-dotted{stroke-dasharray:2;}#svgdd015e60723b4a15b9446595a9e74c57 .marker{fill:#0b0b0b;stroke:#0b0b0b;}#svgdd015e60723b4a15b9446595a9e74c57 .marker.cross{stroke:#0b0b0b;}#svgdd015e60723b4a15b9446595a9e74c57 svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#svgdd015e60723b4a15b9446595a9e74c57 p{margin:0;}#svgdd015e60723b4a15b9446595a9e74c57 .commit-id,#svgdd015e60723b4a15b9446595a9e74c57 .commit-msg,#svgdd015e60723b4a15b9446595a9e74c57 .branch-label{fill:lightgrey;color:lightgrey;font-family:'trebuchet ms',verdana,arial,sans-serif;font-family:var(--mermaid-font-family);}#svgdd015e60723b4a15b9446595a9e74c57 .branch-label0{fill:#333;}#svgdd015e60723b4a15b9446595a9e74c57 .commit0{stroke:hsl(40.5882352941, 100%, 68.3333333333%);fill:hsl(40.5882352941, 100%, 68.3333333333%);}#svgdd015e60723b4a15b9446595a9e74c57 .commit-highlight0{stroke:rgb(0, 52.2500000001, 161.5000000002);fill:rgb(0, 52.2500000001, 161.5000000002);}#svgdd015e60723b4a15b9446595a9e74c57 .label0{fill:hsl(40.5882352941, 100%, 68.3333333333%);}#svgdd015e60723b4a15b9446595a9e74c57 .arrow0{stroke:hsl(40.5882352941, 100%, 68.3333333333%);}#svgdd015e60723b4a15b9446595a9e74c57 .branch-label1{fill:#333;}#svgdd015e60723b4a15b9446595a9e74c57 .commit1{stroke:hsl(-79.4117647059, 100%, 68.3333333333%);fill:hsl(-79.4117647059, 100%, 68.3333333333%);}#svgdd015e60723b4a15b9446595a9e74c57 .commit-highlight1{stroke:rgb(52.2500000001, 161.5000000002, 0);fill:rgb(52.2500000001, 161.5000000002, 0);}#svgdd015e60723b4a15b9446595a9e74c57 .label1{fill:hsl(-79.4117647059, 100%, 68.3333333333%);}#svgdd015e60723b4a15b9446595a9e74c57 .arrow1{stroke:hsl(-79.4117647059, 100%, 68.3333333333%);}#svgdd015e60723b4a15b9446595a9e74c57 .branch-label2{fill:#333;}#svgdd015e60723b4a15b9446595a9e74c57 .commit2{stroke:hsl(220.5882352941, 100%, 73.3333333333%);fill:hsl(220.5882352941, 100%, 73.3333333333%);}#svgdd015e60723b4a15b9446595a9e74c57 .commit-highlight2{stroke:rgb(136.0000000002, 92.0000000001, 0);fill:rgb(136.0000000002, 92.0000000001, 0);}#svgdd015e60723b4a15b9446595a9e74c57 .label2{fill:hsl(220.5882352941, 100%, 73.3333333333%);}#svgdd015e60723b4a15b9446595a9e74c57 .arrow2{stroke:hsl(220.5882352941, 100%, 73.3333333333%);}#svgdd015e60723b4a15b9446595a9e74c57 .branch-label3{fill:#333;}#svgdd015e60723b4a15b9446595a9e74c57 .commit3{stroke:hsl(10.5882352941, 100%, 68.3333333333%);fill:hsl(10.5882352941, 100%, 68.3333333333%);}#svgdd015e60723b4a15b9446595a9e74c57 .commit-highlight3{stroke:rgb(0, 133.0000000002, 161.5000000002);fill:rgb(0, 133.0000000002, 161.5000000002);}#svgdd015e60723b4a15b9446595a9e74c57 .label3{fill:hsl(10.5882352941, 100%, 68.3333333333%);}#svgdd015e60723b4a15b9446595a9e74c57 .arrow3{stroke:hsl(10.5882352941, 100%, 68.3333333333%);}#svgdd015e60723b4a15b9446595a9e74c57 .branch-label4{fill:#333;}#svgdd015e60723b4a15b9446595a9e74c57 .commit4{stroke:hsl(-19.4117647059, 100%, 68.3333333333%);fill:hsl(-19.4117647059, 100%, 68.3333333333%);}#svgdd015e60723b4a15b9446595a9e74c57 .commit-highlight4{stroke:rgb(0, 161.5000000002, 109.2500000001);fill:rgb(0, 161.5000000002, 109.2500000001);}#svgdd015e60723b4a15b9446595a9e74c57 .label4{fill:hsl(-19.4117647059, 100%, 68.3333333333%);}#svgdd015e60723b4a15b9446595a9e74c57 .arrow4{stroke:hsl(-19.4117647059, 100%, 68.3333333333%);}#svgdd015e60723b4a15b9446595a9e74c57 .branch-label5{fill:#333;}#svgdd015e60723b4a15b9446595a9e74c57 .commit5{stroke:hsl(-49.4117647059, 100%, 68.3333333333%);fill:hsl(-49.4117647059, 100%, 68.3333333333%);}#svgdd015e60723b4a15b9446595a9e74c57 .commit-highlight5{stroke:rgb(0, 161.5000000002, 28.5);fill:rgb(0, 161.5000000002, 28.5);}#svgdd015e60723b4a15b9446595a9e74c57 .label5{fill:hsl(-49.4117647059, 100%, 68.3333333333%);}#svgdd015e60723b4a15b9446595a9e74c57 .arrow5{stroke:hsl(-49.4117647059, 100%, 68.3333333333%);}#svgdd015e60723b4a15b9446595a9e74c57 .branch-label6{fill:#333;}#svgdd015e60723b4a15b9446595a9e74c57 .commit6{stroke:hsl(100.5882352941, 100%, 68.3333333333%);fill:hsl(100.5882352941, 100%, 68.3333333333%);}#svgdd015e60723b4a15b9446595a9e74c57 .commit-highlight6{stroke:rgb(109.2500000001, 0, 161.5000000002);fill:rgb(109.2500000001, 0, 161.5000000002);}#svgdd015e60723b4a15b9446595a9e74c57 .label6{fill:hsl(100.5882352941, 100%, 68.3333333333%);}#svgdd015e60723b4a15b9446595a9e74c57 .arrow6{stroke:hsl(100.5882352941, 100%, 68.3333333333%);}#svgdd015e60723b4a15b9446595a9e74c57 .branch-label7{fill:#333;}#svgdd015e60723b4a15b9446595a9e74c57 .commit7{stroke:hsl(160.5882352941, 100%, 68.3333333333%);fill:hsl(160.5882352941, 100%, 68.3333333333%);}#svgdd015e60723b4a15b9446595a9e74c57 .commit-highlight7{stroke:rgb(161.5000000002, 0, 52.2500000001);fill:rgb(161.5000000002, 0, 52.2500000001);}#svgdd015e60723b4a15b9446595a9e74c57 .label7{fill:hsl(160.5882352941, 100%, 68.3333333333%);}#svgdd015e60723b4a15b9446595a9e74c57 .arrow7{stroke:hsl(160.5882352941, 100%, 68.3333333333%);}#svgdd015e60723b4a15b9446595a9e74c57 .branch{stroke-width:1;stroke:#0b0b0b;stroke-dasharray:2;}#svgdd015e60723b4a15b9446595a9e74c57 .commit-label{font-size:10px;fill:rgb(11.0000000001, 34.0000000002, 0);}#svgdd015e60723b4a15b9446595a9e74c57 .commit-label-bkg{font-size:10px;fill:hsl(-79.4117647059, 100%, 93.3333333333%);opacity:0.5;}#svgdd015e60723b4a15b9446595a9e74c57 .tag-label{font-size:10px;fill:#333;}#svgdd015e60723b4a15b9446595a9e74c57 .tag-label-bkg{fill:#fff4dd;stroke:hsl(40.5882352941, 60%, 83.3333333333%);}#svgdd015e60723b4a15b9446595a9e74c57 .tag-hole{fill:#333;}#svgdd015e60723b4a15b9446595a9e74c57 .commit-merge{stroke:#fff4dd;fill:#fff4dd;}#svgdd015e60723b4a15b9446595a9e74c57 .commit-reverse{stroke:#fff4dd;fill:#fff4dd;stroke-width:3;}#svgdd015e60723b4a15b9446595a9e74c57 .commit-highlight-inner{stroke:#fff4dd;fill:#fff4dd;}#svgdd015e60723b4a15b9446595a9e74c57 .arrow{stroke-width:8;stroke-linecap:round;fill:none;}#svgdd015e60723b4a15b9446595a9e74c57 .gitTitleText{text-anchor:middle;font-size:18px;fill:#333;}#svgdd015e60723b4a15b9446595a9e74c57 :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}</style>
<g></g><g class="commit-bullets"></g><g class="commit-labels"></g><g><line class="branch branch0" y2="0" x2="400" y1="0" x1="0"></line><rect transform="translate(-19, -8.5)" height="21" width="52.6875" y="-0.5" x="-68.6875" ry="4" rx="4" class="branchLabelBkg label0"></rect><g class="branchLabel"><g transform="translate(-78.6875, -9.5)" class="label branch-label0"><text><tspan class="row" x="0" dy="1em" xml:space="preserve">main</tspan></text></g></g><line class="branch branch1" y2="90" x2="400" y1="90" x1="0"></line><rect transform="translate(-19, 81.5)" height="21" width="94.6015625" y="-0.5" x="-110.6015625" ry="4" rx="4" class="branchLabelBkg label1"></rect><g class="branchLabel"><g transform="translate(-120.6015625, 80.5)" class="label branch-label1"><text><tspan class="row" x="0" dy="1em" xml:space="preserve">feature/foo</tspan></text></g></g><line class="branch branch2" y2="180" x2="400" y1="180" x1="0"></line><rect transform="translate(-19, 171.5)" height="21" width="96.0546875" y="-0.5" x="-112.0546875" ry="4" rx="4" class="branchLabelBkg label2"></rect><g class="branchLabel"><g transform="translate(-122.0546875, 170.5)" class="label branch-label2"><text><tspan class="row" x="0" dy="1em" xml:space="preserve">feature/bar</tspan></text></g></g></g><g class="commit-arrows"><path class="arrow arrow0" d="M 10 0 L 60 0"></path><path class="arrow arrow1" d="M 60 0 L 60 70 A 20 20, 0, 0, 0, 80 90 L 110 90"></path><path class="arrow arrow1" d="M 110 90 L 160 90"></path><path class="arrow arrow2" d="M 160 90 L 160 160 A 20 20, 0, 0, 0, 180 180 L 210 180"></path><path class="arrow arrow2" d="M 210 180 L 260 180"></path><path class="arrow arrow0" d="M 60 0 L 310 0"></path><path class="arrow arrow0" d="M 310 0 L 360 0"></path></g><g class="commit-bullets"><circle class="commit 1 commit0" r="10" cy="0" cx="10"></circle><circle class="commit 2 commit0" r="10" cy="0" cx="60"></circle><circle class="commit 3 commit1" r="10" cy="90" cx="110"></circle><path class="commit commit-reverse 3 commit1" d="M 105,85L115,95M105,95L115,85"></path><circle class="commit 4 commit1" r="10" cy="90" cx="160"></circle><path class="commit commit-reverse 4 commit1" d="M 155,85L165,95M155,95L165,85"></path><circle class="commit 5 commit2" r="10" cy="180" cx="210"></circle><circle class="commit 6 commit2" r="10" cy="180" cx="260"></circle><rect class="commit 7 commit-highlight0 commit-highlight-outer" height="20" width="20" y="-10" x="300"></rect><rect class="commit 7 commit0 commit-highlight-inner" height="12" width="12" y="-6" x="304"></rect><rect class="commit 8 commit-highlight0 commit-highlight-outer" height="20" width="20" y="-10" x="350"></rect><rect class="commit 8 commit0 commit-highlight-inner" height="12" width="12" y="-6" x="354"></rect></g><g class="commit-labels"><g transform="translate(-13.58, 12.04) rotate(-45, 0, 0)"><rect height="15" width="10" y="13.5" x="5" class="commit-label-bkg"></rect><text class="commit-label" y="25" x="7">1</text></g><g transform="translate(-13.58, 12.04) rotate(-45, 50, 0)"><rect height="15" width="10" y="13.5" x="55" class="commit-label-bkg"></rect><text class="commit-label" y="25" x="57">2</text></g><g transform="translate(-13.58, 12.04) rotate(-45, 100, 90)"><rect height="15" width="10" y="103.5" x="105" class="commit-label-bkg"></rect><text class="commit-label" y="115" x="107">3</text></g><g transform="translate(-13.58, 12.04) rotate(-45, 150, 90)"><rect height="15" width="10" y="103.5" x="155" class="commit-label-bkg"></rect><text class="commit-label" y="115" x="157">4</text></g><g transform="translate(-13.58, 12.04) rotate(-45, 200, 180)"><rect height="15" width="10" y="193.5" x="205" class="commit-label-bkg"></rect><text class="commit-label" y="205" x="207">5</text></g><g transform="translate(-13.58, 12.04) rotate(-45, 250, 180)"><rect height="15" width="10" y="193.5" x="255" class="commit-label-bkg"></rect><text class="commit-label" y="205" x="257">6</text></g><g transform="translate(-13.58, 12.04) rotate(-45, 300, 0)"><rect height="15" width="10" y="13.5" x="305" class="commit-label-bkg"></rect><text class="commit-label" y="25" x="307">7</text></g><g transform="translate(-13.58, 12.04) rotate(-45, 350, 0)"><rect height="15" width="10" y="13.5" x="355" class="commit-label-bkg"></rect><text class="commit-label" y="25" x="357">8</text></g></g></svg>
</div>

<p>Inevitably, these conflicts have to be resolved. This usually causes the rebased commits to be different than the original:</p>

<div class="mermaid">
<!--
%%{init: { 'theme': 'base', 'themeVariables': {'git0': '#ffcb5d', 'git1': '#77a3ff' } } }%%
gitGraph
    commit id: "1"
    commit id: "2"
    branch feature/bar
    checkout feature/bar
    commit id: "3" type: REVERSE
    commit id: "4" type: REVERSE
    commit id: "5"
    commit id: "6"
    checkout main
    commit id: "7"
    commit id: "8"
    commit id: "3'" type: HIGHLIGHT
    commit id: "4'" type: HIGHLIGHT
-->
<svg aria-roledescription="gitGraph" role="graphics-document document" viewbox="-139.0546875 -18 647.0546875 144.65701293945312" style="max-width: 647.055px; background-color: white;" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="100%" id="svgd89400800092df56f1ae4f4ecf67be57"><style>#svgd89400800092df56f1ae4f4ecf67be57{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#333;}#svgd89400800092df56f1ae4f4ecf67be57 .error-icon{fill:hsl(220.5882352941, 100%, 98.3333333333%);}#svgd89400800092df56f1ae4f4ecf67be57 .error-text{fill:rgb(8.5000000002, 5.7500000001, 0);stroke:rgb(8.5000000002, 5.7500000001, 0);}#svgd89400800092df56f1ae4f4ecf67be57 .edge-thickness-normal{stroke-width:1px;}#svgd89400800092df56f1ae4f4ecf67be57 .edge-thickness-thick{stroke-width:3.5px;}#svgd89400800092df56f1ae4f4ecf67be57 .edge-pattern-solid{stroke-dasharray:0;}#svgd89400800092df56f1ae4f4ecf67be57 .edge-thickness-invisible{stroke-width:0;fill:none;}#svgd89400800092df56f1ae4f4ecf67be57 .edge-pattern-dashed{stroke-dasharray:3;}#svgd89400800092df56f1ae4f4ecf67be57 .edge-pattern-dotted{stroke-dasharray:2;}#svgd89400800092df56f1ae4f4ecf67be57 .marker{fill:#0b0b0b;stroke:#0b0b0b;}#svgd89400800092df56f1ae4f4ecf67be57 .marker.cross{stroke:#0b0b0b;}#svgd89400800092df56f1ae4f4ecf67be57 svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#svgd89400800092df56f1ae4f4ecf67be57 p{margin:0;}#svgd89400800092df56f1ae4f4ecf67be57 .commit-id,#svgd89400800092df56f1ae4f4ecf67be57 .commit-msg,#svgd89400800092df56f1ae4f4ecf67be57 .branch-label{fill:lightgrey;color:lightgrey;font-family:'trebuchet ms',verdana,arial,sans-serif;font-family:var(--mermaid-font-family);}#svgd89400800092df56f1ae4f4ecf67be57 .branch-label0{fill:#333;}#svgd89400800092df56f1ae4f4ecf67be57 .commit0{stroke:#ffcb5d;fill:#ffcb5d;}#svgd89400800092df56f1ae4f4ecf67be57 .commit-highlight0{stroke:rgb(34.5000000002, 105.2777777781, 255);fill:rgb(34.5000000002, 105.2777777781, 255);}#svgd89400800092df56f1ae4f4ecf67be57 .label0{fill:#ffcb5d;}#svgd89400800092df56f1ae4f4ecf67be57 .arrow0{stroke:#ffcb5d;}#svgd89400800092df56f1ae4f4ecf67be57 .branch-label1{fill:#333;}#svgd89400800092df56f1ae4f4ecf67be57 .commit1{stroke:#77a3ff;fill:#77a3ff;}#svgd89400800092df56f1ae4f4ecf67be57 .commit-highlight1{stroke:rgb(255, 175.25, 8.5000000002);fill:rgb(255, 175.25, 8.5000000002);}#svgd89400800092df56f1ae4f4ecf67be57 .label1{fill:#77a3ff;}#svgd89400800092df56f1ae4f4ecf67be57 .arrow1{stroke:#77a3ff;}#svgd89400800092df56f1ae4f4ecf67be57 .branch-label2{fill:#333;}#svgd89400800092df56f1ae4f4ecf67be57 .commit2{stroke:hsl(220.5882352941, 100%, 73.3333333333%);fill:hsl(220.5882352941, 100%, 73.3333333333%);}#svgd89400800092df56f1ae4f4ecf67be57 .commit-highlight2{stroke:rgb(136.0000000002, 92.0000000001, 0);fill:rgb(136.0000000002, 92.0000000001, 0);}#svgd89400800092df56f1ae4f4ecf67be57 .label2{fill:hsl(220.5882352941, 100%, 73.3333333333%);}#svgd89400800092df56f1ae4f4ecf67be57 .arrow2{stroke:hsl(220.5882352941, 100%, 73.3333333333%);}#svgd89400800092df56f1ae4f4ecf67be57 .branch-label3{fill:#333;}#svgd89400800092df56f1ae4f4ecf67be57 .commit3{stroke:hsl(10.5882352941, 100%, 68.3333333333%);fill:hsl(10.5882352941, 100%, 68.3333333333%);}#svgd89400800092df56f1ae4f4ecf67be57 .commit-highlight3{stroke:rgb(0, 133.0000000002, 161.5000000002);fill:rgb(0, 133.0000000002, 161.5000000002);}#svgd89400800092df56f1ae4f4ecf67be57 .label3{fill:hsl(10.5882352941, 100%, 68.3333333333%);}#svgd89400800092df56f1ae4f4ecf67be57 .arrow3{stroke:hsl(10.5882352941, 100%, 68.3333333333%);}#svgd89400800092df56f1ae4f4ecf67be57 .branch-label4{fill:#333;}#svgd89400800092df56f1ae4f4ecf67be57 .commit4{stroke:hsl(-19.4117647059, 100%, 68.3333333333%);fill:hsl(-19.4117647059, 100%, 68.3333333333%);}#svgd89400800092df56f1ae4f4ecf67be57 .commit-highlight4{stroke:rgb(0, 161.5000000002, 109.2500000001);fill:rgb(0, 161.5000000002, 109.2500000001);}#svgd89400800092df56f1ae4f4ecf67be57 .label4{fill:hsl(-19.4117647059, 100%, 68.3333333333%);}#svgd89400800092df56f1ae4f4ecf67be57 .arrow4{stroke:hsl(-19.4117647059, 100%, 68.3333333333%);}#svgd89400800092df56f1ae4f4ecf67be57 .branch-label5{fill:#333;}#svgd89400800092df56f1ae4f4ecf67be57 .commit5{stroke:hsl(-49.4117647059, 100%, 68.3333333333%);fill:hsl(-49.4117647059, 100%, 68.3333333333%);}#svgd89400800092df56f1ae4f4ecf67be57 .commit-highlight5{stroke:rgb(0, 161.5000000002, 28.5);fill:rgb(0, 161.5000000002, 28.5);}#svgd89400800092df56f1ae4f4ecf67be57 .label5{fill:hsl(-49.4117647059, 100%, 68.3333333333%);}#svgd89400800092df56f1ae4f4ecf67be57 .arrow5{stroke:hsl(-49.4117647059, 100%, 68.3333333333%);}#svgd89400800092df56f1ae4f4ecf67be57 .branch-label6{fill:#333;}#svgd89400800092df56f1ae4f4ecf67be57 .commit6{stroke:hsl(100.5882352941, 100%, 68.3333333333%);fill:hsl(100.5882352941, 100%, 68.3333333333%);}#svgd89400800092df56f1ae4f4ecf67be57 .commit-highlight6{stroke:rgb(109.2500000001, 0, 161.5000000002);fill:rgb(109.2500000001, 0, 161.5000000002);}#svgd89400800092df56f1ae4f4ecf67be57 .label6{fill:hsl(100.5882352941, 100%, 68.3333333333%);}#svgd89400800092df56f1ae4f4ecf67be57 .arrow6{stroke:hsl(100.5882352941, 100%, 68.3333333333%);}#svgd89400800092df56f1ae4f4ecf67be57 .branch-label7{fill:#333;}#svgd89400800092df56f1ae4f4ecf67be57 .commit7{stroke:hsl(160.5882352941, 100%, 68.3333333333%);fill:hsl(160.5882352941, 100%, 68.3333333333%);}#svgd89400800092df56f1ae4f4ecf67be57 .commit-highlight7{stroke:rgb(161.5000000002, 0, 52.2500000001);fill:rgb(161.5000000002, 0, 52.2500000001);}#svgd89400800092df56f1ae4f4ecf67be57 .label7{fill:hsl(160.5882352941, 100%, 68.3333333333%);}#svgd89400800092df56f1ae4f4ecf67be57 .arrow7{stroke:hsl(160.5882352941, 100%, 68.3333333333%);}#svgd89400800092df56f1ae4f4ecf67be57 .branch{stroke-width:1;stroke:#0b0b0b;stroke-dasharray:2;}#svgd89400800092df56f1ae4f4ecf67be57 .commit-label{font-size:10px;fill:rgb(11.0000000001, 34.0000000002, 0);}#svgd89400800092df56f1ae4f4ecf67be57 .commit-label-bkg{font-size:10px;fill:hsl(-79.4117647059, 100%, 93.3333333333%);opacity:0.5;}#svgd89400800092df56f1ae4f4ecf67be57 .tag-label{font-size:10px;fill:#333;}#svgd89400800092df56f1ae4f4ecf67be57 .tag-label-bkg{fill:#fff4dd;stroke:hsl(40.5882352941, 60%, 83.3333333333%);}#svgd89400800092df56f1ae4f4ecf67be57 .tag-hole{fill:#333;}#svgd89400800092df56f1ae4f4ecf67be57 .commit-merge{stroke:#fff4dd;fill:#fff4dd;}#svgd89400800092df56f1ae4f4ecf67be57 .commit-reverse{stroke:#fff4dd;fill:#fff4dd;stroke-width:3;}#svgd89400800092df56f1ae4f4ecf67be57 .commit-highlight-inner{stroke:#fff4dd;fill:#fff4dd;}#svgd89400800092df56f1ae4f4ecf67be57 .arrow{stroke-width:8;stroke-linecap:round;fill:none;}#svgd89400800092df56f1ae4f4ecf67be57 .gitTitleText{text-anchor:middle;font-size:18px;fill:#333;}#svgd89400800092df56f1ae4f4ecf67be57 :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}</style>
<g></g><g class="commit-bullets"></g><g class="commit-labels"></g><g><line class="branch branch0" y2="0" x2="500" y1="0" x1="0"></line><rect transform="translate(-19, -8.5)" height="21" width="52.6875" y="-0.5" x="-68.6875" ry="4" rx="4" class="branchLabelBkg label0"></rect><g class="branchLabel"><g transform="translate(-78.6875, -9.5)" class="label branch-label0"><text><tspan class="row" x="0" dy="1em" xml:space="preserve">main</tspan></text></g></g><line class="branch branch1" y2="90" x2="500" y1="90" x1="0"></line><rect transform="translate(-19, 81.5)" height="21" width="96.0546875" y="-0.5" x="-112.0546875" ry="4" rx="4" class="branchLabelBkg label1"></rect><g class="branchLabel"><g transform="translate(-122.0546875, 80.5)" class="label branch-label1"><text><tspan class="row" x="0" dy="1em" xml:space="preserve">feature/bar</tspan></text></g></g></g><g class="commit-arrows"><path class="arrow arrow0" d="M 10 0 L 60 0"></path><path class="arrow arrow1" d="M 60 0 L 60 70 A 20 20, 0, 0, 0, 80 90 L 110 90"></path><path class="arrow arrow1" d="M 110 90 L 160 90"></path><path class="arrow arrow1" d="M 160 90 L 210 90"></path><path class="arrow arrow1" d="M 210 90 L 260 90"></path><path class="arrow arrow0" d="M 60 0 L 310 0"></path><path class="arrow arrow0" d="M 310 0 L 360 0"></path><path class="arrow arrow0" d="M 360 0 L 410 0"></path><path class="arrow arrow0" d="M 410 0 L 460 0"></path></g><g class="commit-bullets"><circle class="commit 1 commit0" r="10" cy="0" cx="10"></circle><circle class="commit 2 commit0" r="10" cy="0" cx="60"></circle><circle class="commit 3 commit1" r="10" cy="90" cx="110"></circle><path class="commit commit-reverse 3 commit1" d="M 105,85L115,95M105,95L115,85"></path><circle class="commit 4 commit1" r="10" cy="90" cx="160"></circle><path class="commit commit-reverse 4 commit1" d="M 155,85L165,95M155,95L165,85"></path><circle class="commit 5 commit1" r="10" cy="90" cx="210"></circle><circle class="commit 6 commit1" r="10" cy="90" cx="260"></circle><circle class="commit 7 commit0" r="10" cy="0" cx="310"></circle><circle class="commit 8 commit0" r="10" cy="0" cx="360"></circle><rect class="commit 3' commit-highlight0 commit-highlight-outer" height="20" width="20" y="-10" x="400"></rect><rect class="commit 3' commit0 commit-highlight-inner" height="12" width="12" y="-6" x="404"></rect><rect class="commit 4' commit-highlight0 commit-highlight-outer" height="20" width="20" y="-10" x="450"></rect><rect class="commit 4' commit0 commit-highlight-inner" height="12" width="12" y="-6" x="454"></rect></g><g class="commit-labels"><g transform="translate(-13.58, 12.04) rotate(-45, 0, 0)"><rect height="15" width="10" y="13.5" x="5" class="commit-label-bkg"></rect><text class="commit-label" y="25" x="7">1</text></g><g transform="translate(-13.58, 12.04) rotate(-45, 50, 0)"><rect height="15" width="10" y="13.5" x="55" class="commit-label-bkg"></rect><text class="commit-label" y="25" x="57">2</text></g><g transform="translate(-13.58, 12.04) rotate(-45, 100, 90)"><rect height="15" width="10" y="103.5" x="105" class="commit-label-bkg"></rect><text class="commit-label" y="115" x="107">3</text></g><g transform="translate(-13.58, 12.04) rotate(-45, 150, 90)"><rect height="15" width="10" y="103.5" x="155" class="commit-label-bkg"></rect><text class="commit-label" y="115" x="157">4</text></g><g transform="translate(-13.58, 12.04) rotate(-45, 200, 90)"><rect height="15" width="10" y="103.5" x="205" class="commit-label-bkg"></rect><text class="commit-label" y="115" x="207">5</text></g><g transform="translate(-13.58, 12.04) rotate(-45, 250, 90)"><rect height="15" width="10" y="103.5" x="255" class="commit-label-bkg"></rect><text class="commit-label" y="115" x="257">6</text></g><g transform="translate(-13.58, 12.04) rotate(-45, 300, 0)"><rect height="15" width="10" y="13.5" x="305" class="commit-label-bkg"></rect><text class="commit-label" y="25" x="307">7</text></g><g transform="translate(-13.58, 12.04) rotate(-45, 350, 0)"><rect height="15" width="10" y="13.5" x="355" class="commit-label-bkg"></rect><text class="commit-label" y="25" x="357">8</text></g><g transform="translate(-14.17337890625, 12.57091796875) rotate(-45, 400, 0)"><rect height="15" width="11.5615234375" y="13.5" x="404.21923828125" class="commit-label-bkg"></rect><text class="commit-label" y="25" x="406.21923828125">3'</text></g><g transform="translate(-14.17337890625, 12.57091796875) rotate(-45, 450, 0)"><rect height="15" width="11.5615234375" y="13.5" x="454.21923828125" class="commit-label-bkg"></rect><text class="commit-label" y="25" x="456.21923828125">4'</text></g></g></svg>
</div>

<p>That is, commits 3’ and 4’ are now different than the original commits 3 and 4. They <em>look the same</em> to a human, because usually their title and description will be the same, but their changeset is different. And this is the source of our pain.</p>

<p>Imagine that you are the author of feature <code class="language-plaintext highlighter-rouge">bar</code>. From your point of view, feature <code class="language-plaintext highlighter-rouge">foo</code> and its commits 3 and 4 are now on top of <code class="language-plaintext highlighter-rouge">main</code>, so you should be able to rebase your branch without any conflicts.</p>

<p>Based on what we learned, we now know that:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git switch feature/bar
git rebase main
</code></pre></div></div>

<p>Will calculate the common ancestor between <code class="language-plaintext highlighter-rouge">bar</code> and <code class="language-plaintext highlighter-rouge">main</code> (commit 2) and try to re-apply commits 3, 4, 5 and 6 on top of commit 4’. Git is very smart, so in an ideal world it will detect duplicated commits, like 3 and 4, and skip them, so only 5 and 6 will be re-applied.</p>

<p>However, commits 3’ and 4’ are now too different, and Git complains, and you didn’t expect that and you hate rebasing.</p>

<p>Let’s see what can be done about this.</p>

<h2 id="heading-4-why-rebasing-onto-is-what-you-actually-wanted" class="heading">
<a class="heading-link" href="#heading-4-why-rebasing-onto-is-what-you-actually-wanted">§</a>4. Why rebasing onto is what you actually wanted <a href="#toc-4" class="toc-back-link">↩</a>
</h2>

<p>In the previous example, the owner of feature <code class="language-plaintext highlighter-rouge">bar</code> doesn’t want to re-apply commits 3, 4, only 5 and 6. So how to tell Git to skip the old commits 3 and 4?</p>

<p>The key is to provide a different common ancestor. Instead of:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git rebase main
</code></pre></div></div>

<p>What we can do is:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git rebase 4 <span class="nt">--onto</span> main
</code></pre></div></div>

<p>With this command, what we are telling Git is:</p>

<ol>
  <li>Use commit 4 as the common ancestor.</li>
  <li>Use <code class="language-plaintext highlighter-rouge">main</code> as the merge base.</li>
</ol>

<p>(Important note here: the common ancestor is not included in the rebase.)</p>

<p>Git, knowing this, will only select the commits between the common ancestor (commit 4) and the source branch: commits 5 and 6. When re-applying them on top of the tip of main (commit 4’), they should be fine most of the time.</p>

<div class="mermaid">
<!--
%%{init: { 'theme': 'base' } }%%
gitGraph
    commit id: "1"
    commit id: "2"
    commit id: "7"
    commit id: "8"
    commit id: "3'" type: HIGHLIGHT
    commit id: "4'" type: HIGHLIGHT
    commit id: "5" type: HIGHLIGHT
    commit id: "6" type: HIGHLIGHT
-->
<svg aria-roledescription="gitGraph" role="graphics-document document" viewbox="-95.6875 -18 503.6875 55.74000930786133" style="max-width: 503.688px; background-color: white;" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="100%" id="svg76334cdc281c54e47bd4ee9f5334d65e"><style>#svg76334cdc281c54e47bd4ee9f5334d65e{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#333;}#svg76334cdc281c54e47bd4ee9f5334d65e .error-icon{fill:hsl(220.5882352941, 100%, 98.3333333333%);}#svg76334cdc281c54e47bd4ee9f5334d65e .error-text{fill:rgb(8.5000000002, 5.7500000001, 0);stroke:rgb(8.5000000002, 5.7500000001, 0);}#svg76334cdc281c54e47bd4ee9f5334d65e .edge-thickness-normal{stroke-width:1px;}#svg76334cdc281c54e47bd4ee9f5334d65e .edge-thickness-thick{stroke-width:3.5px;}#svg76334cdc281c54e47bd4ee9f5334d65e .edge-pattern-solid{stroke-dasharray:0;}#svg76334cdc281c54e47bd4ee9f5334d65e .edge-thickness-invisible{stroke-width:0;fill:none;}#svg76334cdc281c54e47bd4ee9f5334d65e .edge-pattern-dashed{stroke-dasharray:3;}#svg76334cdc281c54e47bd4ee9f5334d65e .edge-pattern-dotted{stroke-dasharray:2;}#svg76334cdc281c54e47bd4ee9f5334d65e .marker{fill:#0b0b0b;stroke:#0b0b0b;}#svg76334cdc281c54e47bd4ee9f5334d65e .marker.cross{stroke:#0b0b0b;}#svg76334cdc281c54e47bd4ee9f5334d65e svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#svg76334cdc281c54e47bd4ee9f5334d65e p{margin:0;}#svg76334cdc281c54e47bd4ee9f5334d65e .commit-id,#svg76334cdc281c54e47bd4ee9f5334d65e .commit-msg,#svg76334cdc281c54e47bd4ee9f5334d65e .branch-label{fill:lightgrey;color:lightgrey;font-family:'trebuchet ms',verdana,arial,sans-serif;font-family:var(--mermaid-font-family);}#svg76334cdc281c54e47bd4ee9f5334d65e .branch-label0{fill:#333;}#svg76334cdc281c54e47bd4ee9f5334d65e .commit0{stroke:hsl(40.5882352941, 100%, 68.3333333333%);fill:hsl(40.5882352941, 100%, 68.3333333333%);}#svg76334cdc281c54e47bd4ee9f5334d65e .commit-highlight0{stroke:rgb(0, 52.2500000001, 161.5000000002);fill:rgb(0, 52.2500000001, 161.5000000002);}#svg76334cdc281c54e47bd4ee9f5334d65e .label0{fill:hsl(40.5882352941, 100%, 68.3333333333%);}#svg76334cdc281c54e47bd4ee9f5334d65e .arrow0{stroke:hsl(40.5882352941, 100%, 68.3333333333%);}#svg76334cdc281c54e47bd4ee9f5334d65e .branch-label1{fill:#333;}#svg76334cdc281c54e47bd4ee9f5334d65e .commit1{stroke:hsl(-79.4117647059, 100%, 68.3333333333%);fill:hsl(-79.4117647059, 100%, 68.3333333333%);}#svg76334cdc281c54e47bd4ee9f5334d65e .commit-highlight1{stroke:rgb(52.2500000001, 161.5000000002, 0);fill:rgb(52.2500000001, 161.5000000002, 0);}#svg76334cdc281c54e47bd4ee9f5334d65e .label1{fill:hsl(-79.4117647059, 100%, 68.3333333333%);}#svg76334cdc281c54e47bd4ee9f5334d65e .arrow1{stroke:hsl(-79.4117647059, 100%, 68.3333333333%);}#svg76334cdc281c54e47bd4ee9f5334d65e .branch-label2{fill:#333;}#svg76334cdc281c54e47bd4ee9f5334d65e .commit2{stroke:hsl(220.5882352941, 100%, 73.3333333333%);fill:hsl(220.5882352941, 100%, 73.3333333333%);}#svg76334cdc281c54e47bd4ee9f5334d65e .commit-highlight2{stroke:rgb(136.0000000002, 92.0000000001, 0);fill:rgb(136.0000000002, 92.0000000001, 0);}#svg76334cdc281c54e47bd4ee9f5334d65e .label2{fill:hsl(220.5882352941, 100%, 73.3333333333%);}#svg76334cdc281c54e47bd4ee9f5334d65e .arrow2{stroke:hsl(220.5882352941, 100%, 73.3333333333%);}#svg76334cdc281c54e47bd4ee9f5334d65e .branch-label3{fill:#333;}#svg76334cdc281c54e47bd4ee9f5334d65e .commit3{stroke:hsl(10.5882352941, 100%, 68.3333333333%);fill:hsl(10.5882352941, 100%, 68.3333333333%);}#svg76334cdc281c54e47bd4ee9f5334d65e .commit-highlight3{stroke:rgb(0, 133.0000000002, 161.5000000002);fill:rgb(0, 133.0000000002, 161.5000000002);}#svg76334cdc281c54e47bd4ee9f5334d65e .label3{fill:hsl(10.5882352941, 100%, 68.3333333333%);}#svg76334cdc281c54e47bd4ee9f5334d65e .arrow3{stroke:hsl(10.5882352941, 100%, 68.3333333333%);}#svg76334cdc281c54e47bd4ee9f5334d65e .branch-label4{fill:#333;}#svg76334cdc281c54e47bd4ee9f5334d65e .commit4{stroke:hsl(-19.4117647059, 100%, 68.3333333333%);fill:hsl(-19.4117647059, 100%, 68.3333333333%);}#svg76334cdc281c54e47bd4ee9f5334d65e .commit-highlight4{stroke:rgb(0, 161.5000000002, 109.2500000001);fill:rgb(0, 161.5000000002, 109.2500000001);}#svg76334cdc281c54e47bd4ee9f5334d65e .label4{fill:hsl(-19.4117647059, 100%, 68.3333333333%);}#svg76334cdc281c54e47bd4ee9f5334d65e .arrow4{stroke:hsl(-19.4117647059, 100%, 68.3333333333%);}#svg76334cdc281c54e47bd4ee9f5334d65e .branch-label5{fill:#333;}#svg76334cdc281c54e47bd4ee9f5334d65e .commit5{stroke:hsl(-49.4117647059, 100%, 68.3333333333%);fill:hsl(-49.4117647059, 100%, 68.3333333333%);}#svg76334cdc281c54e47bd4ee9f5334d65e .commit-highlight5{stroke:rgb(0, 161.5000000002, 28.5);fill:rgb(0, 161.5000000002, 28.5);}#svg76334cdc281c54e47bd4ee9f5334d65e .label5{fill:hsl(-49.4117647059, 100%, 68.3333333333%);}#svg76334cdc281c54e47bd4ee9f5334d65e .arrow5{stroke:hsl(-49.4117647059, 100%, 68.3333333333%);}#svg76334cdc281c54e47bd4ee9f5334d65e .branch-label6{fill:#333;}#svg76334cdc281c54e47bd4ee9f5334d65e .commit6{stroke:hsl(100.5882352941, 100%, 68.3333333333%);fill:hsl(100.5882352941, 100%, 68.3333333333%);}#svg76334cdc281c54e47bd4ee9f5334d65e .commit-highlight6{stroke:rgb(109.2500000001, 0, 161.5000000002);fill:rgb(109.2500000001, 0, 161.5000000002);}#svg76334cdc281c54e47bd4ee9f5334d65e .label6{fill:hsl(100.5882352941, 100%, 68.3333333333%);}#svg76334cdc281c54e47bd4ee9f5334d65e .arrow6{stroke:hsl(100.5882352941, 100%, 68.3333333333%);}#svg76334cdc281c54e47bd4ee9f5334d65e .branch-label7{fill:#333;}#svg76334cdc281c54e47bd4ee9f5334d65e .commit7{stroke:hsl(160.5882352941, 100%, 68.3333333333%);fill:hsl(160.5882352941, 100%, 68.3333333333%);}#svg76334cdc281c54e47bd4ee9f5334d65e .commit-highlight7{stroke:rgb(161.5000000002, 0, 52.2500000001);fill:rgb(161.5000000002, 0, 52.2500000001);}#svg76334cdc281c54e47bd4ee9f5334d65e .label7{fill:hsl(160.5882352941, 100%, 68.3333333333%);}#svg76334cdc281c54e47bd4ee9f5334d65e .arrow7{stroke:hsl(160.5882352941, 100%, 68.3333333333%);}#svg76334cdc281c54e47bd4ee9f5334d65e .branch{stroke-width:1;stroke:#0b0b0b;stroke-dasharray:2;}#svg76334cdc281c54e47bd4ee9f5334d65e .commit-label{font-size:10px;fill:rgb(11.0000000001, 34.0000000002, 0);}#svg76334cdc281c54e47bd4ee9f5334d65e .commit-label-bkg{font-size:10px;fill:hsl(-79.4117647059, 100%, 93.3333333333%);opacity:0.5;}#svg76334cdc281c54e47bd4ee9f5334d65e .tag-label{font-size:10px;fill:#333;}#svg76334cdc281c54e47bd4ee9f5334d65e .tag-label-bkg{fill:#fff4dd;stroke:hsl(40.5882352941, 60%, 83.3333333333%);}#svg76334cdc281c54e47bd4ee9f5334d65e .tag-hole{fill:#333;}#svg76334cdc281c54e47bd4ee9f5334d65e .commit-merge{stroke:#fff4dd;fill:#fff4dd;}#svg76334cdc281c54e47bd4ee9f5334d65e .commit-reverse{stroke:#fff4dd;fill:#fff4dd;stroke-width:3;}#svg76334cdc281c54e47bd4ee9f5334d65e .commit-highlight-inner{stroke:#fff4dd;fill:#fff4dd;}#svg76334cdc281c54e47bd4ee9f5334d65e .arrow{stroke-width:8;stroke-linecap:round;fill:none;}#svg76334cdc281c54e47bd4ee9f5334d65e .gitTitleText{text-anchor:middle;font-size:18px;fill:#333;}#svg76334cdc281c54e47bd4ee9f5334d65e :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}</style>
<g></g><g class="commit-bullets"></g><g class="commit-labels"></g><g><line class="branch branch0" y2="0" x2="400" y1="0" x1="0"></line><rect transform="translate(-19, -8.5)" height="21" width="52.6875" y="-0.5" x="-68.6875" ry="4" rx="4" class="branchLabelBkg label0"></rect><g class="branchLabel"><g transform="translate(-78.6875, -9.5)" class="label branch-label0"><text><tspan class="row" x="0" dy="1em" xml:space="preserve">main</tspan></text></g></g></g><g class="commit-arrows"><path class="arrow arrow0" d="M 10 0 L 60 0"></path><path class="arrow arrow0" d="M 60 0 L 110 0"></path><path class="arrow arrow0" d="M 110 0 L 160 0"></path><path class="arrow arrow0" d="M 160 0 L 210 0"></path><path class="arrow arrow0" d="M 210 0 L 260 0"></path><path class="arrow arrow0" d="M 260 0 L 310 0"></path><path class="arrow arrow0" d="M 310 0 L 360 0"></path></g><g class="commit-bullets"><circle class="commit 1 commit0" r="10" cy="0" cx="10"></circle><circle class="commit 2 commit0" r="10" cy="0" cx="60"></circle><circle class="commit 7 commit0" r="10" cy="0" cx="110"></circle><circle class="commit 8 commit0" r="10" cy="0" cx="160"></circle><rect class="commit 3' commit-highlight0 commit-highlight-outer" height="20" width="20" y="-10" x="200"></rect><rect class="commit 3' commit0 commit-highlight-inner" height="12" width="12" y="-6" x="204"></rect><rect class="commit 4' commit-highlight0 commit-highlight-outer" height="20" width="20" y="-10" x="250"></rect><rect class="commit 4' commit0 commit-highlight-inner" height="12" width="12" y="-6" x="254"></rect><rect class="commit 5 commit-highlight0 commit-highlight-outer" height="20" width="20" y="-10" x="300"></rect><rect class="commit 5 commit0 commit-highlight-inner" height="12" width="12" y="-6" x="304"></rect><rect class="commit 6 commit-highlight0 commit-highlight-outer" height="20" width="20" y="-10" x="350"></rect><rect class="commit 6 commit0 commit-highlight-inner" height="12" width="12" y="-6" x="354"></rect></g><g class="commit-labels"><g transform="translate(-13.58, 12.04) rotate(-45, 0, 0)"><rect height="15" width="10" y="13.5" x="5" class="commit-label-bkg"></rect><text class="commit-label" y="25" x="7">1</text></g><g transform="translate(-13.58, 12.04) rotate(-45, 50, 0)"><rect height="15" width="10" y="13.5" x="55" class="commit-label-bkg"></rect><text class="commit-label" y="25" x="57">2</text></g><g transform="translate(-13.58, 12.04) rotate(-45, 100, 0)"><rect height="15" width="10" y="13.5" x="105" class="commit-label-bkg"></rect><text class="commit-label" y="25" x="107">7</text></g><g transform="translate(-13.58, 12.04) rotate(-45, 150, 0)"><rect height="15" width="10" y="13.5" x="155" class="commit-label-bkg"></rect><text class="commit-label" y="25" x="157">8</text></g><g transform="translate(-14.17337890625, 12.57091796875) rotate(-45, 200, 0)"><rect height="15" width="11.5615234375" y="13.5" x="204.21923828125" class="commit-label-bkg"></rect><text class="commit-label" y="25" x="206.21923828125">3'</text></g><g transform="translate(-14.17337890625, 12.57091796875) rotate(-45, 250, 0)"><rect height="15" width="11.5615234375" y="13.5" x="254.21923828125" class="commit-label-bkg"></rect><text class="commit-label" y="25" x="256.21923828125">4'</text></g><g transform="translate(-13.58, 12.04) rotate(-45, 300, 0)"><rect height="15" width="10" y="13.5" x="305" class="commit-label-bkg"></rect><text class="commit-label" y="25" x="307">5</text></g><g transform="translate(-13.58, 12.04) rotate(-45, 350, 0)"><rect height="15" width="10" y="13.5" x="355" class="commit-label-bkg"></rect><text class="commit-label" y="25" x="357">6</text></g></g></svg>
</div>

<p>Before finishing, a few notes. First, before knowing about <code class="language-plaintext highlighter-rouge">git rebase --onto</code> my mental rebasing model was <em>moving branches</em>, with no way to limit the string of commits attached to them. I guess that many people feel like this about Git. After learning about it, and better understanding what rebasing does, how my brain works now is akin to <em>selecting a list of commits</em> and <em>dragging and dropping</em> them onto another place. Literally this is what I would like Git tools to offer me: as if it was a PowerPoint slide, I would like commits to be like text boxes to be selected, edited, dragged and dropped, deleted…</p>

<p>This also has important consequences when using <code class="language-plaintext highlighter-rouge">git rebase --interactive</code>, because when we want to apply modifications to the rebased commits it is important to understand how Git selects that list of commits. If you want to better understand how the common ancestor works, you can try <code class="language-plaintext highlighter-rouge">git rebase -i main</code> and see that it will show commits 3, 4, 5 and 6, while <code class="language-plaintext highlighter-rouge">git rebase -i 4 --onto main</code> will show commits 5 and 6.</p>

<p>Another important difference between <code class="language-plaintext highlighter-rouge">git rebase</code> and <code class="language-plaintext highlighter-rouge">git rebase --onto</code>: when specifying the common ancestor, that commit will not always be nicely tagged with a branch. So do not be afraid of using the hash of the commit as the common ancestor.</p>

<p>And a disclaimer: Git and rebasing is even more complicated and I made some intentional and unintentional simplifications in this post, but in general I find that this mental model of Git works quite well.</p>

<p>In conclusion, if we want to move the commits between branch <code class="language-plaintext highlighter-rouge">base</code> and <code class="language-plaintext highlighter-rouge">source</code>, and apply them to <code class="language-plaintext highlighter-rouge">target</code>, the command is:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git switch <span class="nb">source
</span>git rebase base <span class="nt">--onto</span> target
</code></pre></div></div>



        </div>
        <div class="clear"></div>

    </article>
    <!-- <div class="brutalist_themes__related_posts">

        <h4 class="widget-title">You might also like</h4>

        <ul>
            <li itemscope="" itemtype="http://schema.org/blogPost">
                <a class="title" href="https://lamaquinadeturing.su/2020/05/01/cibernetica-al-servicio-del-comunismo/"
                    title="Cibernética – al servicio del comunismo">
                    <img src="index_fitxers/cybernetics-150x150.png"
                        class="attachment-thumbnail size-thumbnail wp-post-image"
                        alt="Cibernética – al servicio del comunismo" itemprop="image"
                        itemtype="http://schema.org/thumbnailUrl" width="150" height="150">
                    <h5 itemscope="" itemtype="http://schema.org/headline">Cibernética – al servicio del
                        comunismo</h5>
                </a>
            </li>
            <li itemscope="" itemtype="http://schema.org/blogPost">
                <a class="title"
                    href="https://lamaquinadeturing.su/2020/05/01/cuando-la-inteligencia-artificial-desplazo-la-cibernetica/"
                    title="Cuando la inteligencia artificial desplazó la cibernética">
                    <img src="index_fitxers/darthsmouth-1-150x150.jpg"
                        class="attachment-thumbnail size-thumbnail wp-post-image"
                        alt="Cuando la inteligencia artificial desplazó la cibernética" itemprop="image"
                        itemtype="http://schema.org/thumbnailUrl" width="150" height="150">
                    <h5 itemscope="" itemtype="http://schema.org/headline">Cuando la inteligencia artificial
                        desplazó la cibernética</h5>
                </a>
            </li>
        </ul>
        <div class="clear"></div>
    </div> -->
</div>

<div class="grid__item">

    <aside class="widget-area" itemscope="" itemtype="http://schema.org/WPSideBar">
    
    <div class="widget element__frame widget_recent_entries">
        <h3 class="widget-title">Recent Posts</h3>
        <ul>
            
                
            <li>
                <a href="/en/2024/10/git-rebase-onto/">Git rebase doesn't do what you think</a>
                
            </li>
            
                
            <li>
                <a href="/en/2024/09/simple-sabotage-field-manual/">Simple Sabotage Field Manual</a>
                
            </li>
            
                
            <li>
                <a href="/en/2024/08/the-case-for-a-better-web/">The case for a better web</a>
                
            </li>
            
                
            <li>
                <a href="/en/2024/08/this-website-does-not-use-cookies/">This website does not use cookies</a>
                
            </li>
            
                
            <li>
                <a href="/en/2024/08/implementing-search-function-in-static-web-site/">Implementing the search function in a static web site</a>
                
            </li>
            
        </ul>
    </div>
    <!-- <div id="archives-2" class="widget element__frame widget_archive">
        <h3 class="widget-title">Archives</h3>
        <ul>
            <li><a href="https://lamaquinadeturing.su/2021/08/">August 2021</a></li>
            <li><a href="https://lamaquinadeturing.su/2020/05/">May 2020</a></li>
            <li><a href="https://lamaquinadeturing.su/2020/04/">April 2020</a></li>
        </ul>
    </div> -->
    <div class="widget element__frame widget_categories">
        <h3 class="widget-title">Categories</h3>
        <ul>
            
            
            
            
            
            
            <li class="cat-item cat-item-2"><a href="/en/cybernetics/">Cybernetics</a></li>
            
            <li class="cat-item cat-item-2"><a href="/en/lzhenauka/">Lzhenauka</a></li>
            
            <li class="cat-item cat-item-2"><a href="/en/web/">Web</a></li>
            
            
            
            
            
        </ul>
    </div>
    <div class="clear"></div>
</aside>

</div>

        </section>
        

        <footer id="site-footer" itemscope="" itemtype="http://schema.org/WPFooter">
    <a href="https://creativecommons.org/licenses/by-sa/4.0/deed.ca">CC BY-SA</a> · La màquina de Turing ·
    <a href="/en/2024/08/this-website-does-not-use-cookies/">This website does not use cookies</a>
</footer>
    </div>

    <a class="element__frame scroll-top" href="#scroll-top" title="scroll top" style="display: none;">
        <p class="bar__title">Top</p>
    </a>
</body>
</html>